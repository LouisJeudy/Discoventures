describe('Test Profile', () => {
  beforeEach(() => {

    // Mock de la requête /routes/users/2
    cy.intercept('GET', '/routes/users/2', {
      statusCode: 200,
      body: { 
          "status": 200,
          "message": "Tous les parcours de l'utilisateur",
          "data": [
              {
                  "id": 5,
                  "title": "Course de vélo sur le campus",
                  "coordinates": {
                      "data": {
                          "latitude": [
                              45.193291,
                              45.19331,
                              45.193499,
                              45.19371,
                              45.193702,
                              45.1937,
                              45.193686,
                              45.193778,
                              45.193997,
                              45.194026,
                              45.194147,
                              45.194129,
                              45.194126,
                              45.194124,
                              45.194109,
                              45.194093,
                              45.19406,
                              45.194034,
                              45.194105,
                              45.194132,
                              45.194184,
                              45.194181,
                              45.194184,
                              45.194132,
                              45.194105,
                              45.194034,
                              45.19406,
                              45.194093,
                              45.194109,
                              45.194124,
                              45.194126,
                              45.194129,
                              45.194015,
                              45.194026,
                              45.193997,
                              45.193778,
                              45.193686,
                              45.193605,
                              45.193269,
                              45.193166,
                              45.193078,
                              45.193058,
                              45.193032,
                              45.192979,
                              45.192949,
                              45.192927,
                              45.192906,
                              45.192694,
                              45.192615,
                              45.192384,
                              45.192057,
                              45.191932,
                              45.191789,
                              45.191732,
                              45.191677,
                              45.191634,
                              45.191562,
                              45.191523,
                              45.191477,
                              45.191384,
                              45.191301,
                              45.190886,
                              45.190377,
                              45.189665,
                              45.189176,
                              45.189001,
                              45.188946,
                              45.188911,
                              45.188897,
                              45.188878,
                              45.188856,
                              45.188832,
                              45.18881,
                              45.18879,
                              45.188776,
                              45.188676,
                              45.188658,
                              45.188523,
                              45.188313,
                              45.188127,
                              45.187802,
                              45.188127,
                              45.188313,
                              45.188523,
                              45.188681,
                              45.188736,
                              45.188778,
                              45.188793,
                              45.188813,
                              45.188835,
                              45.188858,
                              45.188876,
                              45.188892,
                              45.188905,
                              45.189004,
                              45.189176,
                              45.189665,
                              45.190377,
                              45.190886,
                              45.191301,
                              45.191384,
                              45.191477,
                              45.191523,
                              45.191562,
                              45.191634,
                              45.191677,
                              45.191732,
                              45.191789,
                              45.191932,
                              45.192057,
                              45.192384,
                              45.192615,
                              45.192694,
                              45.192906,
                              45.192927,
                              45.192949,
                              45.192979,
                              45.193032,
                              45.193046,
                              45.19309,
                              45.19312,
                              45.193129,
                              45.193332,
                              45.19331,
                              45.193291
                          ],
                          "longitude": [
                              5.76841,
                              5.768718,
                              5.768435,
                              5.768137,
                              5.768021,
                              5.767992,
                              5.767804,
                              5.767791,
                              5.76776,
                              5.767757,
                              5.767742,
                              5.76747,
                              5.767424,
                              5.767383,
                              5.767008,
                              5.766769,
                              5.766238,
                              5.765834,
                              5.765824,
                              5.765821,
                              5.765815,
                              5.765776,
                              5.765815,
                              5.765821,
                              5.765824,
                              5.765834,
                              5.766238,
                              5.766769,
                              5.767008,
                              5.767383,
                              5.767424,
                              5.76747,
                              5.76749,
                              5.767757,
                              5.76776,
                              5.767791,
                              5.767804,
                              5.767815,
                              5.767863,
                              5.76788,
                              5.767906,
                              5.767909,
                              5.767912,
                              5.76792,
                              5.767924,
                              5.767926,
                              5.767929,
                              5.767771,
                              5.767944,
                              5.768455,
                              5.768659,
                              5.768737,
                              5.768993,
                              5.769062,
                              5.769073,
                              5.769091,
                              5.769138,
                              5.769101,
                              5.769071,
                              5.769059,
                              5.769067,
                              5.769121,
                              5.76918,
                              5.769265,
                              5.769325,
                              5.769328,
                              5.769334,
                              5.769339,
                              5.769312,
                              5.769293,
                              5.769283,
                              5.769282,
                              5.769291,
                              5.769309,
                              5.769335,
                              5.769357,
                              5.769361,
                              5.769395,
                              5.769423,
                              5.769447,
                              5.76949,
                              5.769447,
                              5.769423,
                              5.769395,
                              5.769434,
                              5.769444,
                              5.769453,
                              5.769477,
                              5.769494,
                              5.769502,
                              5.7695,
                              5.769492,
                              5.769477,
                              5.769458,
                              5.769401,
                              5.769325,
                              5.769265,
                              5.76918,
                              5.769121,
                              5.769067,
                              5.769059,
                              5.769071,
                              5.769101,
                              5.769138,
                              5.769091,
                              5.769073,
                              5.769062,
                              5.768993,
                              5.768737,
                              5.768659,
                              5.768455,
                              5.767944,
                              5.767771,
                              5.767929,
                              5.767926,
                              5.767924,
                              5.76792,
                              5.767912,
                              5.768107,
                              5.768904,
                              5.768901,
                              5.769071,
                              5.769051,
                              5.768718,
                              5.76841
                          ]
                      }
                  },
                  "estimatedDistance": 2073.4,
                  "estimatedTime": 794.4,
                  "isPrivate": true,
                  "score": 0,
                  "nbVoters": 0,
                  "activityType": "bike",
                  "userId": 4
              },
              {
                  "id": 6,
                  "title": "Beauté lyonnaise",
                  "coordinates": {
                      "data": {
                          "latitude": [
                              45.738082,
                              45.738023,
                              45.73798,
                              45.737936,
                              45.73788,
                              45.737864,
                              45.737851,
                              45.737941,
                              45.737966,
                              45.737998,
                              45.73803,
                              45.738052,
                              45.738059,
                              45.738065,
                              45.738071,
                              45.738075,
                              45.738048,
                              45.738014,
                              45.737971,
                              45.736626,
                              45.736591,
                              45.736599,
                              45.73656,
                              45.736538,
                              45.736587,
                              45.736647,
                              45.736835,
                              45.737214,
                              45.737132,
                              45.737214,
                              45.736835,
                              45.736647,
                              45.736587,
                              45.736538,
                              45.736514,
                              45.736497,
                              45.736449,
                              45.736404,
                              45.736289,
                              45.736111,
                              45.73604,
                              45.735992,
                              45.735955,
                              45.735922,
                              45.735555,
                              45.735314,
                              45.734641,
                              45.734487,
                              45.734113,
                              45.734023,
                              45.734113,
                              45.734487,
                              45.734641,
                              45.734661,
                              45.7347,
                              45.734719,
                              45.734726,
                              45.734717,
                              45.735396,
                              45.735459,
                              45.735555,
                              45.735573,
                              45.735657,
                              45.736152,
                              45.736172,
                              45.736212,
                              45.73623,
                              45.736246,
                              45.736315,
                              45.736369,
                              45.736397,
                              45.736474,
                              45.73649,
                              45.736514,
                              45.736611,
                              45.736646,
                              45.737869,
                              45.737897,
                              45.737969,
                              45.738052,
                              45.738518,
                              45.738649,
                              45.738862,
                              45.739214,
                              45.739387,
                              45.739436,
                              45.739735,
                              45.739773,
                              45.73985,
                              45.739927,
                              45.74031,
                              45.740544,
                              45.74074,
                              45.740766,
                              45.740869,
                              45.740953,
                              45.741275,
                              45.741597,
                              45.742137,
                              45.742177,
                              45.74226,
                              45.742563,
                              45.742634,
                              45.742697,
                              45.742718,
                              45.742681,
                              45.742718,
                              45.742759,
                              45.742726,
                              45.742411,
                              45.742378,
                              45.742339,
                              45.742274,
                              45.742044,
                              45.741171,
                              45.741118,
                              45.741027,
                              45.740918,
                              45.740817,
                              45.740411,
                              45.74021,
                              45.740179,
                              45.740138,
                              45.740064,
                              45.739969,
                              45.739917,
                              45.73985,
                              45.739773,
                              45.739735,
                              45.739436,
                              45.739387,
                              45.739214,
                              45.738862,
                              45.738649,
                              45.738518,
                              45.738488,
                              45.738482,
                              45.73845,
                              45.738414,
                              45.738317,
                              45.738223,
                              45.738149,
                              45.738144,
                              45.738155,
                              45.738082
                          ],
                          "longitude": [
                              4.872569,
                              4.872556,
                              4.872572,
                              4.872541,
                              4.872506,
                              4.8725,
                              4.872495,
                              4.872019,
                              4.872006,
                              4.871816,
                              4.871783,
                              4.871708,
                              4.871649,
                              4.871596,
                              4.871552,
                              4.871461,
                              4.871411,
                              4.87135,
                              4.871315,
                              4.869498,
                              4.869408,
                              4.869312,
                              4.869247,
                              4.86923,
                              4.86913,
                              4.869015,
                              4.868814,
                              4.868347,
                              4.868196,
                              4.868347,
                              4.868814,
                              4.869015,
                              4.86913,
                              4.86923,
                              4.869217,
                              4.869185,
                              4.869151,
                              4.869112,
                              4.869351,
                              4.869499,
                              4.869556,
                              4.869493,
                              4.869555,
                              4.869673,
                              4.869999,
                              4.870218,
                              4.870788,
                              4.87084,
                              4.87028,
                              4.870157,
                              4.87028,
                              4.87084,
                              4.870788,
                              4.870834,
                              4.870922,
                              4.870964,
                              4.870985,
                              4.871032,
                              4.870404,
                              4.870349,
                              4.870267,
                              4.870251,
                              4.870249,
                              4.869785,
                              4.869792,
                              4.869698,
                              4.869731,
                              4.869741,
                              4.869782,
                              4.869806,
                              4.869781,
                              4.869715,
                              4.869683,
                              4.869636,
                              4.869764,
                              4.869812,
                              4.871464,
                              4.871503,
                              4.8716,
                              4.871708,
                              4.872317,
                              4.872488,
                              4.872773,
                              4.873234,
                              4.873468,
                              4.873558,
                              4.873956,
                              4.874011,
                              4.874126,
                              4.874239,
                              4.874804,
                              4.87514,
                              4.875419,
                              4.875455,
                              4.875595,
                              4.875705,
                              4.876158,
                              4.876625,
                              4.877412,
                              4.877468,
                              4.877577,
                              4.878012,
                              4.878117,
                              4.878206,
                              4.87824,
                              4.878466,
                              4.87824,
                              4.878038,
                              4.877994,
                              4.877552,
                              4.877505,
                              4.87743,
                              4.87733,
                              4.877001,
                              4.875752,
                              4.875677,
                              4.875549,
                              4.875383,
                              4.875232,
                              4.874656,
                              4.874366,
                              4.874321,
                              4.87424,
                              4.87414,
                              4.87413,
                              4.874128,
                              4.874126,
                              4.874011,
                              4.873956,
                              4.873558,
                              4.873468,
                              4.873234,
                              4.872773,
                              4.872488,
                              4.872317,
                              4.872414,
                              4.872432,
                              4.872597,
                              4.872826,
                              4.872908,
                              4.872933,
                              4.872828,
                              4.872738,
                              4.872608,
                              4.872569
                          ]
                      }
                  },
                  "estimatedDistance": 3074.097,
                  "estimatedTime": 2242.456,
                  "isPrivate": false,
                  "score": 0,
                  "nbVoters": 0,
                  "activityType": "walk",
                  "userId": 4
              }
          ]
      },
    }).as('getRequeteRoutesUser')



  })

  it('Vérifier la prise en compte des données, leur cohérence ainsi que le bon affichage des éléments', () => {
    // Se rendre sur la page de connexion
    cy.visit('http://localhost:19006/')

    // Se connecter
    cy.get('#emailInputSignIn').type('mickey@email.com')
    cy.get('#passwordInputSignIn').type('%P4ssW0rd')

    // Appui sur le bouton de connexion
    cy.get('#btnConnectSignIn').click()

    // Appui sur le bouton de profile
    cy.get('a[data-testid="tabProfile"]').click()

    // Vérifier l'existence du bouton de deconnexion
    cy.get("#profileLogoutButton")

    // Verfier le nom d'utilisateur
    cy.get("#profileUsername").should("have.text", "Mickey")

    // Attendre que la requête GET soit interceptée
    cy.wait('@getRequeteRoutesUser').then((interception) => {
      // Vérifie la réponse de la requête interceptée
      expect(interception.response.statusCode).to.equal(200)

      // Verfier le bon affcihage des éléments d'une route
      cy.get("#profileMapCard5").get("#mpTitle").should("have.text", "Course de vélo sur le campus")
      cy.get("#profileMapCard5").get("#mpPrivacy").should("have.text", "Privé")
      cy.get("#profileMapCard5").get("#mpDistance").should("have.text","2 km")
      cy.get("#profileMapCard5").get("#mpTime").should("have.text","00:13:14")
      cy.get("#profileMapCard5").get("#mpActivityType").should("have.text","bike")
      cy.get("#profileMapCard5").get("#mpNbVoters").should("have.text","(0)")
      cy.get("#profileLogoutButton").click()
    })
  })
})

 
 
 
 
//  it('passes', () => {

//    // Intercepte la requête GET et simule une réponse
   

  
   

//     // Vérification du nom de l'utilisateur
//     //cy.get('#usernameProfile').should('have.value', 'louis')

//     cy.get("#distance").should('have.value', '10')

//   })